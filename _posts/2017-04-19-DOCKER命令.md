---
layout: post
title: "docker命令"
date: 2017-04-19
description: "docker命令"
tag: docker
---

　　新的项目开始了有四个月，项目中用到了很多新的技术，docker，springcloud，springboot，kafka，zookeeper等等，这篇文章主要是简单的介绍下docker，并将在项目过程中用到的docker命令介绍下。
## 什么是Docker：

## docker命令:

### pull命令 

    从仓库中拉取镜像

#### 用法 
    docker pull [OPTIONS] NAME[:TAG|@DIGEST]

#### 选项列表 

名称,简写 | 默认值 | 描述
---|---|---
--all-tags,-a | false | 从仓库中下载所有版本
--disable-content-trust | true | 跳过镜像验证

### 示例 
- 命令中不使用tag

    `docker pull debian`

<img src="/images/posts/dockerCmd1/docker-pull.png" height="175" width="642"> 
在上图中标红的部分，显示使用了默认的tag（latest），也就是说如果命令中不标明tag，则默认使用latest

- 命令中使用tag

    `docker pull debian:jessie`

<img src="/images/posts/dockerCmd1/docker-pull-withtag.png" height="97" width="638"> 
在上图中标红的部分，显示了jessie的版本

在上面的命令中镜像名中都没有带仓库IP地址以及端口，这样就是从docker hub或者从配置的加速服务器上拉取镜像。但是如果在内网开发，就需要从私服上去拉取镜像，这样命令中就需要带上仓库的IP地址以及端口。`docker pull 192.168.0.102:5000/solr`,使用这个命令就可以从私服中拉取镜像。

### images命令 

查看镜像列表，通过这个命令可以查看镜像来自哪个服务器（`REPOSITORY表示，如果没有/则表示官方镜像，类似于username/repos_name表示GitHub的个人公共库，类似于regsistory.example.com:5000/repos_name则表示的是私服`），镜像tag，镜像ID，镜像的创建时间以及镜像的实际大小。在执行了`docker images`命令结果如下图所示：

<img src="/images/posts/dockerCmd1/docker-images.png" height="103" width="1013"> 
上图中红色标出的部分，显示了debian的两个不同的tag。黄色标出的部分是两个debian的镜像ID，两个镜像ID一样是因为这是同一个镜像起了不同的tag名（后面会介绍[tag命令](#docker-tag)的使用）

### search
搜索的范围是官方镜像和所有个人公共镜像，`docker search debi`

<img src="/images/posts/dockerCmd1/docker-search.png" height="450" width="994"> 

### <span id = "docker-tag">Tag<span>
docker tag命令的官方解释是“Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE”也就是创建引用SOURCE_IMAGE的标签TARGET_IMAGE，其实说的直白一点就是给镜像重命名。
TAG的命名规则为`标签名称必须是有效的ASCII码，并且可能包含小写和大写字母，数字，下划线，句点和破折号。标签名称不能以句点或破折号开头，最多可包含128个字符`。
给镜像重命名方式有下面几种：

- 通过镜像ID`docker tag 8cedef9d7368 debian:new`
- 通过镜像名称`docker tag debian debian:new`
- 通过镜像名称跟tag`docker tag debian:jessie debian:new`
- 为私有仓库增加tag`docker tag debian:jessie 192.168.0.102:5000/debian`

在上面的第一种以及第二种情况下，原镜像默认使用latest标记，第三种情况原镜像使用jessie标记，<span style="color:red">第四种情况在实际开发中用的比较多</span>。第四种演示如下：
<img src="/images/posts/dockerCmd1/docker-tag.png" height="157" width="1030">

